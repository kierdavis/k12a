import os.path

Import("env")
env = env.Clone()
env.Append(
    NIMCFLAGS = ["--define:release"],
)

footprints = []

for nim_file in env.Glob("*.nim"):
    executable_fn = os.path.splitext(str(nim_file))[0] + ".generate"
    executable = env.Nim(executable_fn, nim_file)
    footprint = env.GenerateFootprint(executable)
    env.RenderFootprintEPS(footprint)
    Clean(executable, "nimcache")

    footprints.append(footprint)

Export("footprints")
